# CodeCoder 性能验证报告模板

> 本模板用于记录 NFR-04 性能基准测试结果

**报告日期**: YYYY-MM-DD
**测试人员**: [自动生成 / 测试人员姓名]
**测试版本**: [Git commit SHA]

---

## 1. 测试目标

根据 `docs/standards/goals.md` NFR-04 非功能性需求：

| 指标 | 目标值 | 说明 |
|------|--------|------|
| ZeroBot 后台唤醒时间 | ≤ 0.5秒 | 冷启动到首次响应 |
| Plan 模式扫描 | ≤ 15秒 | 针对 10 万行代码库 |
| Gateway 内存占用 | < 5MB | 运行时 RSS |

---

## 2. 测试环境

### 2.1 硬件配置

| 项目 | 规格 |
|------|------|
| 平台 | [macOS/Linux] [版本号] |
| 架构 | [x86_64/arm64] |
| CPU | [型号] [核心数] |
| 内存 | [容量] |
| 存储 | [类型/速度] |

### 2.2 软件配置

| 项目 | 版本 |
|------|------|
| Bun | [版本号] |
| Rust | [版本号] |
| Docker | [版本号] (如适用) |

---

## 3. 测试结果

### 3.1 启动时间测试

| 服务 | 测量值 | 目标 | 状态 |
|------|--------|------|------|
| TS Core Startup | [X]ms | ≤500ms | ✅/❌ |
| Gateway Startup | [X]ms | ≤500ms | ✅/❌ |
| Channels Startup | [X]ms | ≤500ms | ✅/❌ |
| Workflow Startup | [X]ms | ≤500ms | ✅/❌ |

### 3.2 Plan 扫描测试

| 测试项 | 代码量 | 耗时 | 状态 |
|--------|--------|------|------|
| 当前项目扫描 | [X]k LOC | [X]ms | 基准 |
| 100k LOC 外推 | 100k LOC | [X]s | ✅/❌ |
| 100k LOC 实测 | 100k LOC | [X]s | ✅/❌ |

**详细数据**:
- 文件数: [X]
- 每行扫描耗时: [X]μs/line
- 依赖分析耗时: [X]ms

### 3.3 API 延迟测试

| 端点 | P50 | P95 | P99 | 状态 |
|------|-----|-----|-----|------|
| /health | [X]ms | [X]ms | [X]ms | ✅/❌ |
| /api/info | [X]ms | [X]ms | [X]ms | ✅/❌ |
| /api/sessions | [X]ms | [X]ms | [X]ms | ✅/❌ |

### 3.4 内存使用测试

| 服务 | 测量值 | 目标 | 状态 |
|------|--------|------|------|
| Gateway RSS | [X]MB | <5MB | ✅/❌ |

---

## 4. 结果汇总

### 4.1 通过/失败统计

| 类别 | 通过 | 失败 | 跳过 |
|------|------|------|------|
| 启动时间 | [X] | [X] | [X] |
| Plan 扫描 | [X] | [X] | [X] |
| API 延迟 | [X] | [X] | [X] |
| 内存使用 | [X] | [X] | [X] |
| **总计** | **[X]** | **[X]** | **[X]** |

### 4.2 总体评估

- [ ] 所有 NFR-04 性能指标达标
- [ ] 部分指标达标，需要优化
- [ ] 多项指标未达标，需要重点关注

---

## 5. 问题与优化建议

### 5.1 发现的问题

| 编号 | 问题描述 | 严重程度 | 相关指标 |
|------|----------|----------|----------|
| P-001 | [问题描述] | [高/中/低] | [指标名] |

### 5.2 优化建议

1. **[优化领域]**
   - 当前状况: [描述]
   - 建议方案: [方案]
   - 预期收益: [收益]

---

## 6. 附录

### 6.1 原始测试输出

```
[粘贴 ./script/benchmark.sh 的原始输出]
```

### 6.2 测试命令

```bash
# 运行完整基准测试
./script/benchmark.sh

# 或使用 bun 直接运行
cd packages/ccode && bun run bench
```

### 6.3 相关文档

- [NFR-04 性能要求](../standards/goals.md#6-非功能性需求与合规标准-nfr--compliance)
- [系统架构设计](../standards/goals.md#2-系统架构设计-system-architecture-design)

---

*本报告由 CodeCoder 性能验证套件自动生成*
*模板版本: 1.0.0*
