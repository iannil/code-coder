<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1045.9750000000001 2796.5" width="1045.9750000000001" height="2796.5" style="--bg:#1a1b26;--fg:#a9b1d6;--line:#3d59a1;--accent:#7aa2f7;--muted:#565f89;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)" />
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)" />
  </marker>
</defs>
<rect x="168.49999999999994" y="772.5" width="140.35000000000014" height="112" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="168.49999999999994" y="772.5" width="140.35000000000014" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="180.49999999999994" y="786.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;1Ô∏è‚É£ Input&quot;</text>
<rect x="147.05" y="928.5" width="183.25" height="424" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="147.05" y="928.5" width="183.25" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="159.05" y="942.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;2Ô∏è‚É£ Session&quot;</text>
<rect x="40" y="1396.5" width="313.6" height="424" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="40" y="1396.5" width="313.6" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="52" y="1410.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;3Ô∏è‚É£ System Prompt&quot;</text>
<rect x="373.6" y="1708.5" width="367.95" height="424" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="373.6" y="1708.5" width="367.95" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="385.6" y="1722.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;4Ô∏è‚É£ LLM Stream&quot;</text>
<rect x="446.2874999999999" y="2176.5" width="218.99999999999994" height="424" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="446.2874999999999" y="2176.5" width="218.99999999999994" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="458.2874999999999" y="2190.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;5Ô∏è‚É£ AI Provider&quot;</text>
<rect x="761.55" y="2020.5" width="244.42500000000007" height="736" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="761.55" y="2020.5" width="244.42500000000007" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="773.55" y="2034.5" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;6Ô∏è‚É£ Tool Execution&quot;</text>
<rect x="136.325" y="40" width="868.5000000000001" height="688.5" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="136.325" y="40" width="868.5000000000001" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="148.325" y="54" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;7Ô∏è‚É£ Response&quot;</text>
<polyline points="238.675,864.5 238.675,984.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1020.5 238.675,1140.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1176.5 238.675,1296.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1332.5 238.675,1452.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1488.5 238.675,1608.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1644.5 238.675,1664.5 113.75,1664.5 113.75,1764.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1644.5 238.675,1664.5 248.39999999999998,1664.5 248.39999999999998,1764.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1644.5 238.675,1664.5 286,1664.5 286,1782.5 420.62500000000006,1782.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,1644.5 238.675,1664.5 306,1664.5 306,1782.5 548.1249999999999,1782.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="472.37500000000006,1800.5 472.37500000000006,1938.5 491.52500000000003,1938.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="628.4749999999999,1800.5 628.4749999999999,1938.5 623.625,1938.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="557.575,1956.5 557.575,2076.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="557.575,2112.5 557.575,2232.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="557.575,2268.5 557.575,2406.5 783.55,2406.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="856.75,2424.5 856.75,2562.5 643.2875,2562.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="555.7875,2580.5 555.7875,2620.5 832.7250000000001,2620.5 832.7250000000001,2718.5 851.875,2718.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="917.925,2700.5 917.925,2680.5 951.95,2680.5 951.95,189.58549874266555 890.6645012573345,189.58549874266555" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="856.75,223.5 856.75,2076.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="856.75,2112.5 856.75,2232.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="856.75,2268.5 856.75,2388.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="800.6073985680191,167.35739856801908 800.6073985680191,243.5 238.675,243.5 238.675,360.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,396.5 238.675,516.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,552.5 238.675,672.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="238.675,708.5 238.675,828.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<rect x="840.17" y="1145" width="33.16" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="856.75" y="1158.5" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">Yes</text>
<rect x="224.955" y="278.5" width="27.44" height="27" rx="4" ry="4" fill="var(--bg)" stroke="var(--_inner-stroke)" stroke-width="0.5" />
<text x="238.675" y="292" text-anchor="middle" dy="0.35em" font-size="11" font-weight="400" fill="var(--_text-muted)">No</text>
<rect x="190.5" y="828.5" width="96.35000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="169.05" y="984.5" width="139.25" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="190.5" y="1140.5" width="96.35000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="190.5" y="1296.5" width="96.35000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="165.47500000000002" y="1452.5" width="146.4" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="172.625" y="1608.5" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="62" y="1764.5" width="103.5" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="189.49999999999997" y="1764.5" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="420.62500000000006" y="1764.5" width="103.5" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="548.1249999999999" y="1764.5" width="160.70000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="491.52500000000003" y="1920.5" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="455.77500000000003" y="2076.5" width="203.60000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="487.95000000000005" y="2232.5" width="139.25" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="783.55" y="2388.5" width="146.4" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="468.2875" y="2544.5" width="175" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="851.875" y="2700.5" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<polygon points="856.75,96 920.5,159.75 856.75,223.5 793,159.75" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="790.7" y="2076.5" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="794.275" y="2232.5" width="124.95" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="172.625" y="360.5" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="183.35000000000002" y="516.5" width="110.65" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="158.325" y="672.5" width="160.70000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<text x="238.675" y="846.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;üë§ User&quot;</text>
<text x="238.675" y="1002.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Input Message&quot;</text>
<text x="238.675" y="1158.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;CLI/TUI&quot;</text>
<text x="238.675" y="1314.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Session&quot;</text>
<text x="238.675" y="1470.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;MessageV2.User&quot;</text>
<text x="238.675" y="1626.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;SystemPrompt&quot;</text>
<text x="113.75" y="1782.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;header()&quot;</text>
<text x="248.39999999999998" y="1782.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;provider()&quot;</text>
<text x="472.37500000000006" y="1782.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;custom()&quot;</text>
<text x="628.4749999999999" y="1782.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;markdownMemory()&quot;</text>
<text x="557.575" y="1938.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;LLM.stream()&quot;</text>
<text x="557.575" y="2094.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Provider.getLanguage()&quot;</text>
<text x="557.575" y="2250.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;LanguageModel&quot;</text>
<text x="856.75" y="2406.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;AI API Request&quot;</text>
<text x="555.7875" y="2562.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Streaming Response&quot;</text>
<text x="917.925" y="2718.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Token Chunks&quot;</text>
<text x="856.75" y="159.75" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Tool Call?</text>
<text x="856.75" y="2094.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Execute Tool&quot;</text>
<text x="856.75" y="2250.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Tool Result&quot;</text>
<text x="238.675" y="378.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Final Result&quot;</text>
<text x="238.675" y="534.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Event Bus&quot;</text>
<text x="238.675" y="690.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">&quot;Display Response&quot;</text>
</svg>