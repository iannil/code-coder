flowchart TB
    subgraph ZeroBot["ZeroBot (Rust)"]
        ZB_Agent["Agent 循环"]
        ZB_Memory["Memory Trait"]
    end

    subgraph CodeCoder["CodeCoder (TypeScript)"]
        CC_Agent["23个 AI Agents"]
        CC_Bridge["MemoryBridge"]
        CC_Router["MemoryRouter"]
        CC_ZB["memory-zerobot"]
        CC_MD["memory-markdown"]
    end

    subgraph Storage["存储层"]
        SQLite[("brain.db\nSQLite + FTS5")]
        Markdown[("./memory/\nMEMORY.md\ndaily/*.md")]
    end

    %% ZeroBot connections
    ZB_Agent --> ZB_Memory
    ZB_Memory -->|读写| SQLite

    %% CodeCoder connections
    CC_Agent --> CC_Bridge
    CC_Bridge --> CC_Router
    CC_Router --> CC_ZB
    CC_Router --> CC_MD
    CC_ZB -->|默认只读| SQLite
    CC_MD -->|读写| Markdown

    %% Shared database
    SQLite -.->|共享数据库| SQLite

    classDef rust fill:#dea584,stroke:#b7410e,color:#000
    classDef ts fill:#3178c6,stroke:#235a97,color:#fff
    classDef storage fill:#2d5016,stroke:#1a3009,color:#fff

    class ZeroBot,ZB_Agent,ZB_Memory rust
    class CodeCoder,CC_Agent,CC_Bridge,CC_Router,CC_ZB,CC_MD ts
    class SQLite,Markdown storage
