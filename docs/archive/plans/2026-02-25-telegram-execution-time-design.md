# Telegram 消息执行时间显示设计

## 概述

在 Telegram 渠道的 AI 响应消息末尾显示执行时间，让用户了解每次请求的处理耗时。

## 需求

- 每次 AI 响应消息底部显示执行时间
- 时间格式友好易读
- 最小修改，低风险

## 设计

### 修改文件

`services/zero-channels/src/bridge.rs`

### 修改方法

`process_chat_with_agent` 方法

### 时间格式

| 时间范围 | 显示格式 | 示例 |
|---------|---------|------|
| < 1秒 | `{ms}ms` | `850ms` |
| 1-60秒 | `{s.1}s` | `3.2s` |
| > 60秒 | `{m}m{s}s` | `1m25s` |

### 显示样式

```
[AI 响应内容...]

_⏱ 3.2s_
```

### 代码变更

在 `process_chat_with_agent` 方法中：

1. 记录开始时间（已存在于 `process` 方法）
2. 调用 `call_codecoder` 获取响应
3. 计算耗时
4. 格式化时间字符串
5. 将时间后缀追加到响应消息

## 测试计划

- [ ] 单元测试：时间格式化函数
- [ ] 集成测试：验证响应包含时间后缀
- [ ] 手动测试：Telegram 实际发送验证

## 日期

2026-02-25
