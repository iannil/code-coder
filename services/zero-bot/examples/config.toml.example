# Example ZeroBot Configuration with CodeCoder Integration
# Copy this file to ~/.codecoder/config.toml and adjust values

# Workspace directory for ZeroBot files
workspace_dir = "~/.codecoder/workspace"
config_path = "~/.codecoder/config.toml"

# API key (OpenRouter, Anthropic, OpenAI, etc.)
# Recommend using ZERO_BOT_API_KEY environment variable instead
# api_key = "sk-..."

# Provider: openrouter, anthropic, openai, ollama, etc.
default_provider = "openrouter"
default_model = "anthropic/claude-sonnet-4-20250514"
default_temperature = 0.7

# ============================================================================
# CodeCoder Integration (NEW)
# ============================================================================
# Enables access to CodeCoder's 23 AI agents via the `codecoder` tool
# Available agents:
#   - build, plan: Main development modes
#   - decision: CLOSE framework for decisions
#   - macro, trader, picker: Economics and trading analysis
#   - miniproduct, ai-engineer: Product and AI engineering
#   - code-reviewer, security-reviewer, tdd-guide, architect: Engineering quality
#   - writer, proofreader: Content creation
#   - observer: Philosophy (祝融说)
#   - explore, general: Utilities

[codecoder]
enabled = true
endpoint = "http://localhost:4096"

# ============================================================================
# Memory Configuration
# ============================================================================

[memory]
backend = "sqlite"  # sqlite | markdown | none
auto_save = true
hygiene_enabled = true
archive_after_days = 7
purge_after_days = 30

# Vector embeddings for semantic search (optional)
# embedding_provider = "openai"
# embedding_model = "text-embedding-3-small"

# ============================================================================
# Security / Autonomy
# ============================================================================

[autonomy]
level = "Supervised"  # ReadOnly | Supervised | Full
workspace_only = true
max_actions_per_hour = 20
max_cost_per_day_cents = 500

allowed_commands = [
    "git", "npm", "cargo", "ls", "cat", "grep", "find",
    "echo", "pwd", "wc", "head", "tail"
]

forbidden_paths = [
    "/etc", "/root", "/home", "/usr", "/bin", "/sbin",
    "~/.ssh", "~/.gnupg", "~/.aws", "~/.config"
]

# ============================================================================
# Channels (Multi-platform access)
# ============================================================================

[channels_config]
cli = true

# Telegram (optional)
# [channels_config.telegram]
# bot_token = "123456:ABC..."
# allowed_users = ["your_telegram_user_id"]
#
# # Voice message transcription (optional)
# [channels_config.telegram.voice]
# enabled = true
# stt_provider = "openai"  # openai, uniapi, groq, deepinfra, local, compatible
# # stt_api_key = "sk-..."  # Optional, defaults to main api_key
# # stt_model = "whisper-1"  # Optional, defaults to whisper-1
#
# # Local Whisper (faster-whisper-server via Docker)
# # Requires: Docker Desktop
# # Start: ./ops.sh start whisper
# # Stop:  ./ops.sh stop whisper
# # [channels_config.telegram.voice]
# # enabled = true
# # stt_provider = "local"
# # stt_base_url = "http://localhost:4403"
# # stt_model = "base"  # tiny, base, small, medium, large

# Discord (optional)
# [channels_config.discord]
# bot_token = "your_discord_bot_token"
# guild_id = "your_guild_id"
# allowed_users = ["user_id1", "user_id2"]

# ============================================================================
# Gateway (HTTP API)
# ============================================================================

[gateway]
port = 3000
host = "127.0.0.1"
require_pairing = true
allow_public_bind = false

# ============================================================================
# Browser Automation (optional)
# ============================================================================

[browser]
enabled = false
allowed_domains = ["github.com", "docs.rs", "crates.io"]

# ============================================================================
# Heartbeat / Scheduled Tasks
# ============================================================================

[heartbeat]
enabled = false
interval_minutes = 30

# ============================================================================
# Reliability
# ============================================================================

[reliability]
provider_retries = 2
provider_backoff_ms = 500
scheduler_poll_secs = 15
